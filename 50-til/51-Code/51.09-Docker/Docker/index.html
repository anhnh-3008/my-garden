<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="🌿 I. Bối cảnh 🌱 Trước đây mô hình máy chủ được tạo thành bởi ba yếu tố:
Máy chủ vật lý (Physical Server) Hệ điều hành ([[50 til/51 Code/51."><title>🐬 Docker</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://anhhn.netlify.app//icon.png><link href=https://anhhn.netlify.app/styles.93122d67bf9382106f082efbc3cd23eb.min.css rel=stylesheet><link href=https://anhhn.netlify.app/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://anhhn.netlify.app/js/darkmode.183fcede5b91e00cd4379bf6fc1fe35f.min.js></script>
<script src=https://anhhn.netlify.app/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://anhhn.netlify.app/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://anhhn.netlify.app/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://anhhn.netlify.app/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://anhhn.netlify.app/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://anhhn.netlify.app/",fetchData=Promise.all([fetch("https://anhhn.netlify.app/indices/linkIndex.d07b64979d26826f5690307a05255cda.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://anhhn.netlify.app/indices/contentIndex.61f588f066b2d0d089f543eab798c0fd.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://anhhn.netlify.app",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://anhhn.netlify.app",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{"’":"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/anhhn.netlify.app\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-HDBMVFQGBH"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HDBMVFQGBH",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://anhhn.netlify.app/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script><h1 id=page-title><a href=https://anhhn.netlify.app/>Home</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>🐬 Docker</h1><p class=meta>Last updated
Sep 20, 2022
<a href=https://github.com/anhnh-3008/quartz/tree/hugo/content/50%20til/51%20Code/51.09%20Docker/Docker.md rel=noopener>Edit Source</a></p><ul class=tags><li><a href=https://anhhn.netlify.app/tags/til/>Til</a></li><li><a href=https://anhhn.netlify.app/tags/docker/>Docker</a></li></ul><aside class=mainTOC><details open><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#-i-bối-cảnh>🌿 I. Bối cảnh</a></li><li><a href=#-ii-what-docker>🌿 II. What Docker?</a></li><li><a href=#-iii-why-docker>🌿 III. Why Docker?</a></li><li><a href=#-iv-những-khái-niệm-phổ-biến>🌿 IV. Những khái niệm phổ biến</a><ol><li><a href=#1-container>1. Container</a></li><li><a href=#2-image>2. Image</a></li><li><a href=#3-dockerfile>3. Dockerfile</a></li></ol></li><li><a href=#-v-một-vài-câu-lệnh-hay-được-sử-dụng>🌿 V. Một vài câu lệnh hay được sử dụng</a></li></ol></nav></details></aside><a href=#-i-bối-cảnh><h2 id=-i-bối-cảnh><span class=hanchor arialabel=Anchor># </span>🌿 I. Bối cảnh</h2></a><p><strong><img src=https://lh6.googleusercontent.com/l1T2krPv068MLPC1J8jYFIDgQ47_VT1VmUcFofBWypN-Kb-EX6IBfULvpeD4TsBh40meAUN-7A6erjR-s48nkuQxA8xWOxAC4GiFLLWPoyLHEViSScy14ABVJP0VPY8sT1MMUFNDBp8yTOQWxEZcgS0erEK4qO9orhKcrRJEv_6KlyPbbjl-Pmca width=auto alt></strong>
🌱 Trước đây mô hình máy chủ được tạo thành bởi ba yếu tố:</p><ul><li>Máy chủ vật lý (Physical Server)</li></ul><ul><li>Hệ điều hành (<a class="internal-link broken">Operating System</a>)</li><li>Các ứng dụng (Application)</li></ul><p>Mô hình trên có những nhược điểm:</p><ul><li>Một máy chủ chỉ cài được 1 OS</li><li>Cho dù ổ cứng khủng, ram khủng thì cũng không thể tận dụng hết được</li></ul><p>🌱 Vì những nhược điểm đó, công nghệ ảo hóa <strong>Virtualization</strong> được ra đời, ưu điểm so với mô hình cũ là:</p><ul><li>Trên một máy chủ vật lý, có thể cài được nhiều hệ điều hành, tận dụng được tài nguyên tốt hơn do có thể phân chia tài nguyên cho từng máy ảo</li></ul><p>Nhưng vẫn có những thứ chưa được tối ưu:</p><ul><li>Về tài nguyên:<ul><li>Khi thiết lập máy ảo chúng ta sẽ cần cấu hình để cung cấp tài nguyên từ ổ cứng và ram từ máy thật cho máy ảo. Những tài nguyên được phân ra sẽ là cố định. Dẫn đến việc, khi bật máy ảo, kể cả khi không làm gì thì máy thật cũng sẽ mất một lượng tài nguyên mà ban đầu chúng ta đã cung cấp.</li></ul></li><li>Về thời gian:<ul><li>Thời gian bật/tắt máy ảo khá lâu(mấy phút lận)</li></ul></li></ul><p>🌱 Để khắc phục những nhược điểm còn tồn đọng đó, công nghệ <strong>Containerization</strong>, ưu điểm của công nghệ này đó là:</p><p><img src=https://lh4.googleusercontent.com/mUbQaVuvrz58iy4ySacviA8nGD1-MNeX6TzY3sSxY982frJtmsICy3JZplo52qHH4ffyiy01eKZpH9x0oE2nMgnkLT7l2iAHkSzoucvthQsozcYFAt1soJAmHPjftBXcQ8x5EGPJYzYV5GvZJ9LTZ1XfFTvNzMf8K6wBMei84RzAicKTG0fBsVLk width=auto alt></p><ul><li>Thừa hưởng khả năng tạo được nhiều máy ảo trên cùng một máy chủ vật lý như <strong>Virtualization</strong> , nhưng tốt hơn ở chỗ những máy ảo này sẽ dùng chung phần nhân và cùng chia sẻ với nhau tài nguyên của máy mẹ. Máy ảo dùng bao nhiêu tài nguyên sẽ được cấp bấy nhiêu, chứ ko có tình trạng tài nguyên bị rảnh rỗi nữa, như vậy thì việc tận dụng tài nguyên sẽ tối ưu hơn.</li><li>Đặc trưng của công nghệ này là sử dụng các <strong>containers</strong>.</li></ul><p><img src=https://lh6.googleusercontent.com/r4-OlfYsbR1dZ0M_NkB6e49MefZWZUR2RZK2kppihpj1PTkebxA_C-cT4SIRJuKiNuSBYxpWO46t_-U16KCSHJNiYD9P1Mdr1SEIomyw9fi5gEga5srvhymPoJoOpx_sOtR2KJsytnhTDk6fhS-3O-7yfFuRPy5Oh6Tsi48i-BYiU999MuwBsSZ7 width=auto alt></p><p>🌱 Với công nghệ <strong>Virtualization</strong>, chúng ta có thể dùng các công cụ tiêu biểu như <strong>Virtualbox</strong> hay <strong>VMware</strong>, còn với <strong>Containerization</strong> đó chính <strong>Docker</strong>.</p><p><img src=https://lh3.googleusercontent.com/tc5QldwzU46Kx0zuTQZ8inuJax19jfTODrl5z6Wo8KnYXExUbuEA1hKcQ6Os6R_RWv9qU0knCYzlFdOspkgtuE7LRgqrKEYqwdSfXOh7dCw1l3-7RYuKg6BqN_X22_JcGxJNA2Z1NFmMwEqI8mjspbvD6X8XWj7S86edsc-s269_XqNFF--EIkHb width=auto alt></p><a href=#-ii-what-docker><h2 id=-ii-what-docker><span class=hanchor arialabel=Anchor># </span>🌿 II. What Docker?</h2></a><ul><li>Là mã nguồn mở</li><li>Mục đích develop, deploy and run applications bằng những containers</li></ul><p>Xem hướng dẫn cài Docker tại 
<a href=https://docs.docker.com/engine/installation/ rel=noopener>đây</a></p><a href=#-iii-why-docker><h2 id=-iii-why-docker><span class=hanchor arialabel=Anchor># </span>🌿 III. Why Docker?</h2></a><ul><li>Build một lần dùng được nhiều lần và nhiều chỗ</li><li>Bật/tắt nhanh chóng</li></ul><a href=#-iv-những-khái-niệm-phổ-biến><h2 id=-iv-những-khái-niệm-phổ-biến><span class=hanchor arialabel=Anchor># </span>🌿 IV. Những khái niệm phổ biến</h2></a><a href=#1-container><h3 id=1-container><span class=hanchor arialabel=Anchor># </span>1. Container</h3></a><ul><li>Là một quá trình chạy trên <strong><a class="internal-link broken">Linux kernel</a></strong>.
Được cấp phát tài nguyên riêng: CPU, bộ nhớ và hệ thống tập tin. Chính vì vậy, Docker độc lập với những tiến trình đang chạy của máy tính và không ảnh hưởng đến các containers/processes khác đang chạy.</li></ul><a href=#2-image><h3 id=2-image><span class=hanchor arialabel=Anchor># </span>2. Image</h3></a><p>Là tệp chứa mọi thứ cần để thực thi: dependencies, binaries, source code, &mldr; Xây dựng bằng cách thực thi các câu lệnh trong <strong>Dockerfile</strong>. Một <strong>Image</strong> có thể được sử dụng để tạo nhiều <strong>containers</strong> giống nhau. Mỗi <strong>container</strong> là một <strong>instantiation</strong> của <strong>image</strong>.</p><a href=#3-dockerfile><h3 id=3-dockerfile><span class=hanchor arialabel=Anchor># </span>3. Dockerfile</h3></a><p>Là một tệp chứa các câu lệnh cần thiết để xây dựng một <strong>Image</strong>.</p><a href=#-v-một-vài-câu-lệnh-hay-được-sử-dụng><h2 id=-v-một-vài-câu-lệnh-hay-được-sử-dụng><span class=hanchor arialabel=Anchor># </span>🌿 V. Một vài câu lệnh hay được sử dụng</h2></a><ul><li><p><strong>docker pull image_name</strong>: pull một image từ Docker Hub.</p></li><li><p><strong>docker build</strong>: build một container từ Dockerfile và một context(bao gồm các folders|files được đặt ở PATH/URL).</p></li><li><p><strong>docker run</strong>: chạy container từ một image.</p></li><li><p><strong>docker ps</strong>: list ra những containers đang chạy. <strong>-a/&ndash;all</strong> để lấy tất cả containers hoặc -q/&ndash;quite nếu chỉ muốn lấy cấc ids của containers.</p></li><li><p><strong>docker logs [container_id/container_name]</strong>: xem logs của 1 container, <strong>-f/&ndash;follow</strong> để xem log output.</p></li><li><p><strong>docker volume ls</strong>: list ra các volumes được dùng để lưu trữ data được sinh ra và sử dụng bởi các containers.</p></li><li><p><strong>docker rm [container_id/container_name]</strong>: xóa 1 hoặc nhiều containers.</p></li><li><p><strong>docker rmi [image_id]</strong>: xóa 1 hoặc nhiều images.</p></li><li><p><strong>docker stop</strong>: dừng 1 hoặc nhiều containers.</p></li><li><p><strong>docker kill</strong>: kill 1 hoặc nhiều containers.</p></li><li><p><strong>docker kill $(docker ps -q)</strong>: kill tất cả containers đang chạy</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-cmd data-lang=cmd><span class=line><span class=cl>$(docker ps -q) #lấy ra id của các containers đang chạy.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$(docker ps -a -q) #lấy id của toàn bộ các containers.
</span></span></code></pre></div><ul><li><strong>docker system prune</strong>: Dọn toàn bộ resources(images, containers, volumes, networks) đang bị treo(không liên kết với bất kì container nào).</li></ul><div id=modalShowImage class=modal><span class=close>&#215;</span>
<img class=modal-content id=modal-content-img></div><script>$(".myImg").on("click",function(){$("#modalShowImage").css("display","block"),$("#modal-content-img").attr("src",this.src),$("body").addClass("modal-open")}),$("#modalShowImage").on("hidden.bs.modal",function(){$("body").removeClass("modal-open")}),$("#modalShowImage").on("click",".close",function(){$("#modalShowImage").css("display","none"),$("body").removeClass("modal-open")})</script></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/50-til/51-Code/51.09-Docker/Docker-Compose/ data-ctx="50 til/51 Code/51.09 Docker/Docker" data-src=/50-til/51-Code/51.09-Docker/Docker-Compose class=internal-link>🦑 Docker Compose</a></li><li><a href=/50-til/51-Code/51.09-Docker/Docker-Network/ data-ctx=container data-src=/50-til/51-Code/51.09-Docker/Docker-Network class=internal-link>🐬 Docker Network</a></li><li><a href=/50-til/51-Code/51.09-Docker/Dockerfile/ data-ctx=container data-src=/50-til/51-Code/51.09-Docker/Dockerfile class=internal-link>🐬 Dockerfile</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://anhhn.netlify.app/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by anhnh using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://anhhn.netlify.app/>Home</a></li><li><a href="https://www.facebook.com/profile.php?id=100026527598703">Facebook</a></li><li><a href=https://github.com/anhnh-3008>Github</a></li></ul></footer></div></div></body></html>