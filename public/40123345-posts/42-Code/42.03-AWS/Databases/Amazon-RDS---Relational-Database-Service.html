<!DOCTYPE html>
<html><head><title>🌱 Amazon RDS - Relational Database Service</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="🌱 Amazon RDS - Relational Database Service"/><meta property="og:description" content="🌿 What? § Service quản lý DB sử dụng SQL là query language, cho phép cta có thể tạo databases trên cloud. Các types AWS quản lý: Postgres MySQL MariaDB Oracle Microsoft SQL Server Aurora 🌿 Advantage § Tự động cập nhật cũng như vá OS."/><meta property="og:image" content="https://https://anhhn.netlify.app//static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../../../static/icon.png"/><meta name="description" content="🌿 What? § Service quản lý DB sử dụng SQL là query language, cho phép cta có thể tạo databases trên cloud. Các types AWS quản lý: Postgres MySQL MariaDB Oracle Microsoft SQL Server Aurora 🌿 Advantage § Tự động cập nhật cũng như vá OS."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../../../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Dancing Script:wght@400;700&amp;family=Signika Negative:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../../../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch(`../../../../static/contentIndex.json`).then(data => data.json())</script></head><body data-slug="40123345-posts/42-Code/42.03-AWS/Databases/Amazon-RDS---Relational-Database-Service"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title"><a href="../../../..">🪴 HA's Garden</a></h1><div class="spacer mobile-only"></div><div class="search"><div id="search-icon"><p>Search</p><div></div><svg tabIndex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="darkmode"><input class="toggle" id="darkmode-toggle" type="checkbox" tabIndex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35;" xmlSpace="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'" xmlSpace="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="toc desktop-only"><button type="button" id="toc"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#-what" data-for="-what">🌿 What?</a></li><li class="depth-0"><a href="#-advantage" data-for="-advantage">🌿 Advantage</a></li><li class="depth-0"><a href="#-storage-auto-scaling" data-for="-storage-auto-scaling">🌿 Storage Auto Scaling</a></li><li class="depth-0"><a href="#-read-replicas" data-for="-read-replicas">🌿 Read Replicas</a></li><li class="depth-1"><a href="#-network-cost" data-for="-network-cost">🍃 Network Cost</a></li><li class="depth-0"><a href="#-rds-multi-az-disaster-recovery" data-for="-rds-multi-az-disaster-recovery">🌿 RDS Multi AZ (Disaster Recovery)</a></li><li class="depth-0"><a href="#-from-single-az-to-multi-az" data-for="-from-single-az-to-multi-az">🌿 From Single-AZ to Multi-AZ</a></li><li class="depth-0"><a href="#-rds-custom" data-for="-rds-custom">🌿 RDS Custom</a></li><li class="depth-0"><a href="#-rds-backups" data-for="-rds-backups">🌿 RDS Backups</a></li><li class="depth-0"><a href="#-rds-restore" data-for="-rds-restore">🌿 RDS Restore</a></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><h1 class="article-title">🌱 Amazon RDS - Relational Database Service</h1><p class="content-meta">Mar 07, 2023, 3 min read</p><ul class="tags"><li><a href="../../../../tags/aws" class="internal tag-link">#aws</a></li></ul></div></div><article class="popover-hint"><h2 id="-what">🌿 What?<a aria-hidden="true" tabindex="-1" href="#-what" class="internal"> §</a></h2>
<ul>
<li>Service quản lý DB sử dụng SQL là query language, cho phép cta có thể tạo databases trên cloud.</li>
<li>Các types AWS quản lý:
<ul>
<li>Postgres</li>
<li>MySQL</li>
<li>MariaDB</li>
<li>Oracle</li>
<li>Microsoft SQL Server</li>
<li>Aurora</li>
</ul>
</li>
</ul>
<h2 id="-advantage">🌿 Advantage<a aria-hidden="true" tabindex="-1" href="#-advantage" class="internal"> §</a></h2>
<ul>
<li>
<p>Tự động cập nhật cũng như vá OS.</p>
</li>
<li>
<p>Liên tục backup và restore tại một thời diểm chỉ định</p>
</li>
<li>
<p>Có thể quan sát được thông số hoạt động</p>
</li>
<li>
<p>Có thể đọc bản sao để cải thiện hiệu suất đọc dữ liệu</p>
</li>
<li>
<p>Có thể setup trên nhiều AZs bằng DR(Disaster Recovery)</p>
</li>
<li>
<p>Có thể scaling(cả dọc và ngang)</p>
</li>
<li>
<p>Backup dữ liệu trên <a href="../../../../40123345-posts/42-Code/42.03-AWS/EBS-Volume---Elastic-Block-Store" class="internal">EBS</a>.</p>
</li>
<li>
<p>Nhưng không thể SSH vào instances.</p>
</li>
</ul>
<h2 id="-storage-auto-scaling">🌿 Storage Auto Scaling<a aria-hidden="true" tabindex="-1" href="#-storage-auto-scaling" class="internal"> §</a></h2>
<ul>
<li>Là tính năng giúp chúng ta có thể tự động tăng thêm bộ nhớ để lưu trữ trong TH free storage được sử dụng hết.</li>
<li>Tránh mở rộng bằng cách thủ công</li>
<li>Có thể set <strong>Maximum Storage Threshold</strong>, không được scale quá ngưỡng này.</li>
<li>Tính năng sẽ được kích hoạt mở rộng bộ nhớ khi:
<ul>
<li>Free space nhỏ hơn 10%</li>
<li>Dung lượng lưu trữ thấp quá 5p</li>
<li>6h trôi qua kể từ lần modification cuối cùng.</li>
</ul>
</li>
<li>Hữu ích với những app không dự đoán được trước lượng dữ liệu.</li>
<li>Hỗ trợ cho các engines: MariaDB, PostgreSQL, SQL Server, Oracle.</li>
</ul>
<h2 id="-read-replicas">🌿 Read Replicas<a aria-hidden="true" tabindex="-1" href="#-read-replicas" class="internal"> §</a></h2>
<ul>
<li>Tăng khả năng đọc dữ liệu, có thể tạo nhiều nhất 5 Read Replicas, thuộc về một AZ, khác AZ hoặc khác Region.</li>
<li>ASYNC.</li>
<li>Replicas có thể chuyển thành DB</li>
</ul>
<h3 id="-network-cost">🍃 Network Cost<a aria-hidden="true" tabindex="-1" href="#-network-cost" class="internal"> §</a></h3>
<ul>
<li>Trong AWS, khi dữ liệu đi từ AZ này sang AZ khác sẽ phải chịu phí, nhưng Với những RDS Read Replicas trong cùng một region, không phải trả phí.
<img src="../../../../00-Meta/01-Attachments/Pasted-image-20230307223247.png" width="auto" height="auto"/></li>
</ul>
<h2 id="-rds-multi-az-disaster-recovery">🌿 RDS Multi AZ (Disaster Recovery)<a aria-hidden="true" tabindex="-1" href="#-rds-multi-az-disaster-recovery" class="internal"> §</a></h2>
<ul>
<li>Chủ yếu là để khôi phục sau thảm họa(sóng thần cuốn mất data center 😔)</li>
<li>Tăng availability</li>
<li>SYNC replication</li>
<li>Không dùng với mục đich scale</li>
<li>Phòng trường hợp AZ mất kết nối, mất mạng hoặc instance hay store bị lỗi.</li>
</ul>
<h2 id="-from-single-az-to-multi-az">🌿 From Single-AZ to Multi-AZ<a aria-hidden="true" tabindex="-1" href="#-from-single-az-to-multi-az" class="internal"> §</a></h2>
<ul>
<li>Zero downtime, không cần dừng DB</li>
<li>Cơ chế hoạt động:
<ul>
<li>Một snapshot được tạo từ DB chính.</li>
<li>DB mới được restored ở region mới từ snapshot.</li>
<li>Quá trinh đồng bộ được thành lập giữa 2 databases.
<img src="../../../../00-Meta/01-Attachments/Pasted-image-20230307225946.png" width="auto" height="auto"/></li>
</ul>
</li>
</ul>
<h2 id="-rds-custom">🌿 RDS Custom<a aria-hidden="true" tabindex="-1" href="#-rds-custom" class="internal"> §</a></h2>
<ul>
<li><strong>Quản lý Oracle và Microsoft SQL Server Database cùng với OS và tuỳ biến database.</strong>
|RDS|RDS Custom|
|----|-------------|
|tự động setup, hoạt động và scaling| truy cập được vào OS, databasem, có thể setting config, install patches, bật native features, truy cập vào EC2 Instance bằng <strong>SSH</strong> hoặc <strong>SSM Session Manager</strong>|</li>
<li><strong>De-active Automation Mode</strong> để thực hiện custiomization, tốt hơn là nên tạo một DB snapshot trước.</li>
</ul>
<h2 id="-rds-backups">🌿 RDS Backups<a aria-hidden="true" tabindex="-1" href="#-rds-backups" class="internal"> §</a></h2>
<ul>
<li>Tính năng cho phép lưu lại dữ liệu để có thể restore khi dữ liệu bị mất hoặc nếu cần.</li>
<li>Có hai loại:
<ul>
<li>Backups tự động
<ul>
<li>Backup hàng ngày</li>
<li>Transaction logs ffoec backups 5p một lần</li>
<li>Có thể set thời gian lưu trữ (1 -> 35 ngày), sau thời gian này sẽ không restore lại được nữa. Hoặc có thể set = 0 để disable tính năng này.</li>
</ul>
</li>
<li>Backup thủ công (DB Snapshots)
<ul>
<li>Thực hiện thủ công</li>
<li>Giữ lại backup vô thời hạn.</li>
</ul>
</li>
</ul>
</li>
<li>Trick: Nếu stop RDS database, chúng ta vẫn sẽ phải trả một khoản tiền cho bộ nhớ. Nếu chúng ta có kế hoạch sẽ stop lâu lâu, thì có thể snapshot để lưu trữ, sau dùng thì restore lại.</li>
</ul>
<h2 id="-rds-restore">🌿 RDS Restore<a aria-hidden="true" tabindex="-1" href="#-rds-restore" class="internal"> §</a></h2>
<ul>
<li>Restoring từ RDS backup hoặc snapshot tạo một database mới.</li>
<li>Restoring MySQL RDS database từ S3
<ul>
<li>Tạo một backup sử dụng Percona XtraBackup</li>
<li>Lưu file backup vào S3</li>
<li>Restore từ file backup đó</li>
</ul>
</li>
</ul></article></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xmlSpace="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li><a href="../../../../40123345-posts/42-Code/42.03-AWS/Databases/Amazon-Athena" class="internal">🌱 Amazon Athena</a></li><li><a href="../../../../40123345-posts/42-Code/42.03-AWS/Databases/Database-in-AWS" class="internal">🌱 Database in AWS</a></li><li><a href="../../../../40123345-posts/42-Code/42.03-AWS/Disaster-Recovery/AWS-Backup" class="internal">🌱 AWS Backup</a></li><li><a href="../../../../40123345-posts/42-Code/42.03-AWS/Disaster-Recovery/Disaster-Recovery-Overview" class="internal">🌱 Disaster Recovery Overview</a></li><li><a href="../../../../40123345-posts/42-Code/42.03-AWS/Security-&amp;-Encryption/AWS-KMS---Key-Management-Service" class="internal">🌱 AWS KMS - Key Management Service</a></li></ul></div></div></div><footer><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.0.10</a>, © 2023</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></body><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">
          const socket = new WebSocket('ws://localhost:3001')
          socket.addEventListener('message', () => document.location.reload())
        </script><script src="../../../../postscript.js" type="module"></script></html>